# CHANGELOG

## 2.0.5

修正客户端重连后无法继续运行脚本的问题

## 2.0.4

1. 修正客户端连接握手失败时的崩溃问题
2. go版本升级到1.18.5

## 2.0.3

1. 支持docker容器的log采集
2. 增加基于prometheus的埋点监控
3. /cmd/run接口增加defer_rm和callback参数
4. /cmd/sync_run接口增加defer_rm参数
5. go版本升级到1.18.4

## 2.0.2

1. 修正/hm/static接口返回值与文档不一致的问题
2. 新增/scaffolding/foo接口支持脚手架项目

## 2.0.1

1. 修正上传文件大于1M时无法正确上传的问题
2. 新增yaml编排文件支持
3. 支持logging项目

## 2.0.0

1. 适配agent版本2.x
2. 通信协议修改为websocket+json
3. 修改插件目录结构

### 关于插件

1. 修改/cmd/run接口，增加env参数
2. 修改/cmd/pty接口参数定义
3. 增加/cmd/sync_run接口
4. 增加/host/search接口
5. 远程执行命令增加磁盘缓存功能，解决返回数据量过大时的内存占用过大问题
6. 文件上传下载增加对文本内容的压缩功能
7. 调整上传文件超过1M时的处理方式

## 1.3.2

### 新增功能

1. 增加/agent/stop和/agent/start接口
2. 增加/agent/generate接口

## 1.3.1

### 新增功能

1. 支持插件的启动/停止
2. /cmd/ps接口增加cmd返回字段
3. /plugin/install接口返回插件原始版本号
4. 新增/plugin/start和/plugin/stop接口
5. 修改插件列表若干接口，增加运行状态的返回结果
6. /cmd/ps接口增加cmd字段

### 修复BUG

1. 修正插件卸载日志中的版本号问题
3. 修正已停止插件的监控数据问题

## 1.3.0

### 新增功能

1. 支持samp平台化管理
2. 新增agent安装、重启、更新接口

### 新增优化

1. 调整plugin的目录结构
2. client握手超时时间增加到30秒

### 修复BUG

无

## 1.2.2

### 新增功能

无

### 新增优化

1. 分发插件时增加重传功能
2. jkplugin插件升级，支持suse

### 修复BUG

无

## 1.2.1

### 新增功能

无

### 新增优化

1. host.monitor去除动态数据上报
2. host.monitor静态数据上报修改为1天一次
3. /hm/static接口支持被动通知host.monitor上报数据

### 修复BUG

1. 修正plugin无法更新的问题

## 1.2.0

### 新增功能

1. agent支持同时连接多个server

### 新增优化

无

### 修复BUG

无

## 1.1.0

### 新增功能

1. 增加插件的CPU内存监控页面
2. 增加host.monitor插件
3. shell功能支持windows
4. web页面增加版本号显示，所有程序支持-version参数查看版本号

### 新增优化

1. 优化插件内存监控时的CPU占用问题
2. 切换到gogo的protobuf库，优化gc

### 修复BUG

1. 修正agent端未配置limit时插件进程被杀死的问题
2. 修正上传空文件的报错问题
3. 修正panic的插件无法升级的问题

## 1.0.0

### 新增功能

1. 远程执行命令
2. 文件查询上传下载
3. 命令行工具

### 新增优化

无

### 修复BUG

无
